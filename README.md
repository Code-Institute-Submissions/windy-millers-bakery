# Windy Miller's Bakery - Data Centric Design

Introduction paragraph.
## View site:

[View Deployed Site](https://windy-miller.herokuapp.com/)




[### Aims & Purpose:](#aims-and-purpose)
[Developer Aims](#developer-aims), [Project Spec](#project-spec)

[### Overview:](#overview)
[UX](#ux), [User Stories](#user-stories), [Data Structure](#data-structure), [Surface design](#surface-design), [Wireframes](#wireframes)

[### Features of the Project:](#features)
[Current Features](#current-features), [Planned Features](#planned-features)

[### Technologies Used:](#technologies-used)
[Languages](#languages), [Libraries](#libraries), [Tools](#tools), [Hosting](#hosting)

[### Data Structure:](#data-stucture)
[Rationale](#rationale), [Database Overview](#database-overview), [Collections](#collections), [DB Fields](#db-fields)

[### Workflow:](#workflow)

[### Testing:](#testing)

[Code Validation](#code-validation), [Responsiveness and Rendering](#responsiveness-and-rendering), [Browser Compatibility](#browser-compatibility), [Features Testing](#features-testing), [Unit Tests](#unit-tests)

[### Deployment:](#deployment)
[Deployment to Heroku](#deployment-to-heroku), [Local Deployment](#local-deployment)

[### Acknowledgements:](#acknowledgements)
[Copy](#copy), [Media](#media), [Code](#code)




## <a name="aims-and-purpose"></a> Aims & Purpose:

#### <a name="developer-aims"></a> Developer Aims

1. Apply understanding of how to use CRUD calls to mongodb using Python with Flask application
2. Build HTML based user interface to demonstrate CRUD calls in action
3. Style the above using the Materialize framework for improved UX
4. Document the project for future reference
5. Build the project in a time efficient and effective manner to meet initial spec precisely, enhancing this with 'nice to have' features only if time allows.

#### <a name="project-spec"></a> Project Spec

1. Data handling: Build a MongoDB-backed Flask project for a web application that allows users to store and manipulate data records about a particular domain.
2. Database structure: A database structure well-suited for the data domain of a recipe book website. Use appropriate nesting relationships between records of different entities.
3. User functionality: Create functionality for users to create, locate, display, edit and delete records (CRUD functionality).
4. Use of technologies: Use HTML and custom CSS for the website's front-end.
5. Structure: Incorporate a main navigation menu and structured layout. This may be achieved with Materialize / Bootstrap
6. Documentation: Provides detail on what the project does and the value that it provides to its users.
7. Version control: Use Git & GitHub for version control.
8. Attribution: Maintain clear separation between code written by you and code from external sources (e.g. libraries or tutorials). Attribute any code from external sources to its source via comments above the code and (for larger dependencies) in the README.
9. Deployment: Deploy the final version of your code to a hosting platform - Heroku.


 ## <a name="overview"></a> Overview

 #### <a name="ux"></a>UX


 #### <a name="user-stories"></a> User Stories


 #### <a name="data-structure"></a> Data Structure

 #### <a name="surface-design"></a> Surface design

 #### <a name="wireframes"></a> Wireframes



 ## <a name="features"></a> Features of the Project:

 #### <a name="current-features"></a> Current Features

 #### <a name="planned-features"></a> Planned Features




 ## <a name="technologies-used"></a> ## Technologies Used:



 #### <a name="languages"></a> Languages

* [HTML 5.0](https://www.w3.org/Style/CSS/)
* [CSS](https://www.w3.org/Style/CSS/) - style the html and add interactivity
* [Javascript](https://developer.mozilla.org/en-US/docs/Web/JavaScript) - used for manipulating the DOM
* [Python 3](https://www.python.org/) - Used for back end application
* [Jinja](https://jinja.palletsprojects.com/en/2.11.x/)

 #### <a name="libraries"></a> Libraries & Frameworks
* [Flask 1.0.2](https://flask.palletsprojects.com/en/1.1.x/) - A micro web server framework
* [Pymongo 2.3.0](https://flask-pymongo.readthedocs.io/en/latest/) - Used to perform C.R.U.D. operations in Mongo DB using python
* [Materialize 0.100.2](http://archives.materializecss.com/0.100.2/) - CSS framework for front end
* [jQuery](https://jquery.com/) - used for enhanced interactive features
* [Flex](http://flexboxgrid.com/) - used to achieve responsive layout on About page
* [Isotope](https://isotope.metafizzy.co/) - used to add sorting and filtering of grid items on the home page
* [Animate on Scroll Library](https://michalsnik.github.io/aos/) - add animations on scroll
* [Lottie Files](https://lottiefiles.com/) - Used as source for json based animation files and embedded player

 #### <a name="tools"></a> Tools
* [Git](https://git-scm.com/) - for version control
* [Github](https://github.com/) - provide hosting for development using Git
* [Mongodb](https://www.mongodb.com/cloud/atlas) - the database server used
* [VSCode](https://code.visualstudio.com/) - Local IDE
* [uPic](https://apps.apple.com/us/app/upic-image-compression/id1341586328?mt=12) - used for Image compression


 #### <a name="hosting"></a> Hosting

* [Heroku](https://www.heroku.com/) - for hosting

 ## <a name="data-stucture"></a> ## Data Structure:

 #### <a name="rationale"></a> Rationale
 #### <a name="database-overview"></a> Database Overview
 #### <a name="collections"></a> Collections
 #### <a name="db-fields"></a> DB Fields 



 ## <a name="workflow"></a> ## Workflow: 

Working Process:
CRUD Operations Stage
Integrating Frameworks - Materialize, Isotope, AOS
Customised Front End
Content Migration
Final enhancements



 ## <a name="testing"></a> ## Testing: 

 #### <a name="code-validation"></a> Code Validation 

 #### <a name="responsiveness-and-rendering"></a> Responsiveness and Rendering

 #### <a name="browser-compatibility"></a> Browser Compatibility

 #### <a name="features-testing"></a> Features Testing

 #### <a name="unit-tests"></a> Unit Tests 




 ## <a name="deployment"></a> ## Deployment: 

 #### <a name="deployment-to-heroku"></a> Deployment to Heroku

 #### <a name="local-deployment"></a> Local Deployment 




 ## <a name="acknowledgements"></a> Acknowledgements:

 #### <a name="copy"></a> Copy 

 #### <a name="media"></a> Media

 #### <a name="code"></a> Code 










Workflow and Project Process
Agree specification for Project with (fictitous client)
    Site Structure
    Header
    Footer
    Minimum Functions
    Nice to have Functions






## Technologies used


### Tools used for automation
- To validate html: https://validator.w3.org/
- To validate css: https://jigsaw.w3.org/css-validator/
- To check Javascript for errors: https://www.jslint.com/
- To pick colours from image when building colour scheme: https://imagecolorpicker.com/

### Features
Make it clear which features OF CODE have been used.
Make Defensive design clear
Form confirm page
Testing - use dead link checker


### Testing:

- http://www.cssdrive.com/cssautoprefixer/

Note: The css validator throws errors relating to use of :root, var and also some webkit prefixes. These do not affect the project's performance.
Use dead link checker
Mobile menu link - old link found


## Scope agreed with (fictitious) client prior to project start:
### Credit: Adapted from Code Institute project spec)

## User Stories
### As a customer looking for recipes I want to be able to

1. Easily learn how to navigate the different recipes
2. Find the type of recipe I am interested in quickly
3. Add my own recipes to the database
4. Get reassuring feedback when I update the database (edit, add, delete)

### Site Owners Goals
1. Promote a brand of kitchen utensils

### Minimum:
1. Create a web application that allows users to store and easily access cooking recipes. Recipes would include fields such as ingredients, preparation steps, required tools, cuisine, etc.
2. Create the backend code and frontend form(s) to allow users to add new recipes to the site, edit them and delete them.
3. Create the backend and frontend functionality for users to locate recipes based on the recipe's fields. You may choose to create a full search functionality, or just a directory of recipes.
4. Provide results in a manner that is visually appealing and user friendly.

### Site Structure

#### Pages
* Home
* Search
* Recipes
* Utensils
* Carousel (advanced optional feature)
* Responsive grid displays in fewer columns on tablet / mobile

#### Header
* Appears identical on all pages
* Hamburger style on mobile
* Include CTA button to promote utensil products

#### Footer
* First Column:
* Social Media links
* Privacy Policy
* Terms and Conditions
* Login (advanced features)
* Second column with Category options
* Third column with Utensil Products view


#### Site Minimum Functions
1. Implements grid view of recipes. Visual design to be agreed with client / designer / developer before development work starts.
2. Displays three recipe categories by title with recipes and 'ALL' recipe display. Each category to be viewed separately, or view all option (default).
3. Sort by recipe name, or cooking time

### Potential advanced features (nice to have):

1. [] Build upon the required tools field to promote your brand of kitchen tools (e.g. oven, pressure cooker, etcâ€¦). Display detail on the utensil itself on a single page view for this utensil
2. [] Create a dashboard to provide some statistics about all the recipes. Number of recipes, number in each category, utensils, number of recipes using this utensil
3. [] Pagination for more than 20 recipes.
4. [] Sort by name or cooking time in ascending / descending order.
5. [] Add 'similar recipes' display on single recipe view
6. [] Display 'Featured utensils' on home page
7. [] Carousel display on home page with interactive swipe navigation
8. [] Add facility to log in order use a provided pin before editing / deletion is permitted. 
9. [] Header is 'sticky' and shrinks on scroll
10. [] Background or hero header image parallax effect
11. [] CTA tab bar floating / sticky on right of screen to encourage user to navigate to utensils page.
12. [] Update form to verify all form fields and only accept forms accordingly.
13. [] Confirmation messages when data has been added / updated / deleted. Delete confirm message.
14. [] Featured Recipe option
15. [] Facility to convert units from metric to imperial
16. [] Add isotope.js to animate the sorting, filtering and displaying of data 
17. [] Delete function will only mark recipe as 'archived.' To permanently delete, user must enter archive manager and then permanently delete the item.
18. [] Submit image through form and use Cloudinary to host images. API Documentation here: https://cloudinary.com/documentation/cloudinary_references



## Wireframes

## Deployment: Process followed to set up database connection and deploy project to heroku

### Database Setup

Create database on mongodb cloud

Get data in place first, on atlas mongo website:
* database with two collection: categories and tasks
* Create a sample record in category collection called category_name: "Home"
* Create sample record in the task collection with category_name, task_name, task_description, is_urgent and due_date


### Setup using VS Code on a Mac
* **sudo pip3 install Flask** to install Flask
* **python3 -m venv env** to install virtual environment in that folder
* Open command palette, type **Python: Select Interpreter** and select the virtual environment in your project folder that starts with ./env or .\env
* In command pallette, run **Terminal: Create New Integrated Terminal**
* Install Flask in the virtual environment with **pip3 install Flask**
* **pip3 install flask_pymongo**
* Create app.py (In flask, the convention is to use run.py or app.py)
* **from flask import Flask** to import Flask in app.py Capital F indicates a class name.
* Create instance of flask within app.py with **app = Flask(name)**
* In Terminal **python3 -m flask run** to run the app and serve

### Deploying to Heroku
#### Four steps to deploying in Heroku
1. Create Heroku app
2. Link git repo
3. Create requirements.txt
4. Create Procfile


In terminal:

    heroku login

Use browser to log in

    heroku apps

In terminal

    git init
    git add .
    git commit -m 'Initial commit'
    heroku git:remote -a windy-miller
    git push heroku master (fails - needs requirements.txt)
    sudo pip3 freeze --local > requirement.txt
    git add .
    git commit -m 'Added requirements'
    git push heroku master (fails - needs procfile)
    echo web: python app.py > Procfile
    git push heroku master
    heroku ps:scale web=1

On Heroku web interface:
Specify IP 0.0.0.0 and Port 5000

### Connecting to MongoDB Atlas

    sudo pip3 install flask-pymongo
    sudo pip3 install dnspython
    
    
in new file env.py:
	import os
	os.environ["MONGO_URI"] = "mongodb+srv://databaseusernameHERE:passwordforthatuserHERE@myfirstcluster-ghyoe.mongodb.net/databasenameHERE?retryWrites=true&w=majority"

*NOTE* Formatting of connection string carefully. No <> around password, there are THREE places to insert the correct into in to the connection string.


in app.py this will read the needed variables from the env.py file, created above):

	from os import path 
	if path.exists("env.py"):
    import env

    from flask_pymongo import PyMongo
    from bson.objectid import ObjectId

	app.config["MONGO_DBNAME"] = 'windy-millers_bakery'
	app.config["MONGO_URI"] = os.environ.get("MONGO_URI")

On Mongo Website: Overview -> Connect -> Connect my app -> Choose Python3.6 or later

Copy connection string

Paste in connection string

**Ensure an environment variable for above is used when in production**
**Database mini project was set up using an environment variable**

Create an instance of pymongo, add app with constructor method.

    mongo = Pymongo(app)


# Features of current version:
Home Page:
Header slides up on scroll down and re-appears on scroll up
Hero header with opacity overlay and parallax effect
Smooth scrolling from anchor link to another position on the same page
Content organised in to sections with appropriate mobile optimised padding
Google icons
css variables used throughout to enable global changes to site colour theme
Grow on hover
Animate on scroll
Filter and Sort - controls for these are mobile optimised - ie filter tabs are only displayed on desktop view, select fields are used on mobile view
Floating buttons for database utilities enable easy access
Quote box
Data dashboard
Reuseable components - quote section and data dashboard

### Defensive design
* Required form fields
* Delete confirmation

## Reference Sites

### Technical
https://caniuse.com/
https://css-tricks.com/
https://docs.mongodb.com/manual/reference/
https://www.w3schools.com/


### Credits
https://en.wikibooks.org/wiki/Cookbook:Table_of_Contents
https://pixabay.com/

ALL images Compressed using UPic image optimisation software.

## Colour Palette:
The following image was used for colour palette inspiration:
https://www.pinterest.co.uk/pin/524880531556508076/
The website https://imagecolorpicker.com/en/ was used to autogenerate a wider range of colour codes from the original reference image.

Convert hex to rgb, rgba:
https://www.hexcolortool.com/

## Design
Reference was taken from Doves Farm for inspiration

## Testing

During testing cross browser issues were discovered with the following libraries. They were therefore not used:
Css variables
https://jonsuh.com/hamburgers/
https://michalsnik.github.io/aos/

## Known issues:

Sort by cooking time not working.

